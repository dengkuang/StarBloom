<!-- å­©å­é€‰æ‹©å™¨ç»„ä»¶ -->
<view class="child-selector-container">
  <!-- å½“å‰é€‰ä¸­çš„å­©å­æ˜¾ç¤ºåŒºåŸŸ -->
  <view class="current-child-display" bindtap="toggleSelector">
    <image 
      class="child-avatar" 
      src="{{currentChild.avatar || '/images/default-avatar.png'}}" 
      mode="aspectFill"
    ></image>
    <view class="child-info">
      <text class="child-name">{{currentChild.name || 'è¯·é€‰æ‹©å­©å­'}}</text>
      <text class="child-details" wx:if="{{currentChild.name}}">
        {{currentChild.gender === 'male' ? 'ğŸ‘¦' : 'ğŸ‘§'}} {{currentChild.age}}å²
      </text>
    </view>
    <text class="selector-arrow {{showList ? 'rotate' : ''}}">â–¼</text>
  </view>

  <!-- å±•å¼€çš„å­©å­åˆ—è¡¨ -->
  <view class="child-list {{showList ? 'show' : ''}}" wx:if="{{childrenList.length > 1}}">
    <view 
      class="child-item {{index === selectedIndex ? 'selected' : ''}}"
      wx:for="{{childrenList}}"
      wx:key="_id"
      wx:for-index="index"
      bindtap="onSelectChild"
      data-index="{{index}}"
    >
      <!-- é€‰ä¸­çŠ¶æ€æŒ‡ç¤ºå™¨ -->
      <view class="check-indicator {{index === selectedIndex ? 'checked' : ''}}">
        <text class="check-mark">âœ“</text>
      </view>
      
      <!-- å­©å­å¤´åƒ -->
      <image 
        class="child-avatar-small" 
        src="{{item.avatar || '/images/default-avatar.png'}}" 
        mode="aspectFill"
      ></image>
      
      <!-- å­©å­ä¿¡æ¯ -->
      <view class="child-info-small">
        <text class="child-name-small">{{item.name}}</text>
        <text class="child-details-small">
          {{item.gender === 'male' ? 'ğŸ‘¦' : 'ğŸ‘§'}} {{item.age}}å²
        </text>
      </view>
      
      <!-- ç§¯åˆ†æ˜¾ç¤º -->
      <view class="child-points" wx:if="{{showPoints}}">
        <text class="points-text">{{item.totalPoints || 0}}åˆ†</text>
      </view>
    </view>
  </view>

  <!-- é®ç½©å±‚ - ç‚¹å‡»æ”¶èµ·åˆ—è¡¨ -->
  <view 
    class="selector-mask {{showList ? 'show' : ''}}" 
    bindtap="hideSelector"
    wx:if="{{showList}}"
  ></view>
</view>