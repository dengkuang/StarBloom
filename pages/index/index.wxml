<!-- pages/index/index.wxml -->
<!-- æ–°ç‰ˆé¦–é¡µé¡µé¢ç»“æ„ -->
<view class="container">
  <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯ -->
  <view class="header">
    <image class="user-avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
    <view class="user-info">
      <text class="welcome-text">æ¬¢è¿å›æ¥, {{userInfo.nickName}}!</text>
      <text class="date-text">{{currentDate}}</text>
    </view>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ -->
  <view class="stats-grid">
    <view class="stat-card">
      <text class="stat-value">{{stats.totalPoints || 0}}</text>
      <text class="stat-label">æ€»ç§¯åˆ†</text>
    </view>
    <view class="stat-card">
      <text class="stat-value">{{stats.completedTasks || 0}}</text>
      <text class="stat-label">å®Œæˆä»»åŠ¡</text>
    </view>
    <view class="stat-card">
      <text class="stat-value">{{stats.activeChildren || 0}}</text>
      <text class="stat-label">æ´»è·ƒå­©å­</text>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½å…¥å£ -->
  <view class="quick-actions">
    <view class="section-title">
      <text>å¿«æ·æ“ä½œ</text>
    </view>
    <view class="action-grid">
      <view class="action-item" bindtap="navigateToTasks">
        <view class="action-icon">ğŸ“‹</view>
        <text class="action-text">ä»»åŠ¡ç®¡ç†</text>
      </view>
      <view class="action-item" bindtap="navigateToRewards">
        <view class="action-icon">ğŸ</view>
        <text class="action-text">å¥–åŠ±å•†åº—</text>
      </view>
      <view class="action-item" bindtap="navigateToChildren">
        <view class="action-icon">ğŸ‘¶</view>
        <text class="action-text">å­©å­ç®¡ç†</text>
      </view>
      <view class="action-item" bindtap="navigateToAnalysis">
        <view class="action-icon">ğŸ“Š</view>
        <text class="action-text">æ•°æ®åˆ†æ</text>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„å­©å­åŒºåŸŸ -->
  <view class="children-section">
    <view class="section-header">
      <text class="section-title">æˆ‘çš„å­©å­</text>
      <text class="section-more" bindtap="navigateToChildren">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    
    <view class="children-list">
      <child-card 
        wx:for="{{childrenList.slice(0, 3)}}" 
        wx:key="id" 
        child="{{item}}" 
        showActions="{{false}}"
        bind:tap="onChildTap">
      </child-card>
    </view>

    <view class="add-child-button" bindtap="onAddChild" wx:if="{{childrenList.length === 0}}">
      <text class="add-icon">+</text>
      <text class="add-text">æ·»åŠ ç¬¬ä¸€ä¸ªå­©å­</text>
    </view>
  </view>
</view>